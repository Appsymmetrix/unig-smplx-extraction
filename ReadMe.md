# SMPL-X Body Measurement Extraction

This project extracts **precise human body measurements** from **SMPL-X meshes** generated from PIXIE (`param.pkl`).  
It converts the PIXIE parameters into a canonical SMPL-X mesh and applies anthropometric measurement definitions from **SMPL-Anthropometry**.

Useful for:

- Tailor-grade measurement extraction  
- Virtual try-on systems  
- Clothing size recommendation engines  
- 3D avatar generation  
- Health & fitness applications  

---

## ğŸš€ Features

âœ”ï¸ Extracts detailed SMPL-X body measurements  
âœ”ï¸ Supports PIXIE-generated `param.pkl` files  
âœ”ï¸ Height normalization to real-world scale  
âœ”ï¸ Dockerized for deployment  
âœ”ï¸ AWS ECR ready  
âœ”ï¸ RunPod serverless compatible  

---

## ğŸ“¥ Input

- `param.pkl` generated by PIXIE  
- User height in centimeters  

Sample Input - `POST Method`
Body - `raw - JSON`

{
    "input": {
        "pkl_url": "https://unig-dev-v1.s3.ap-south-1.amazonaws.com/test1_param.pkl",
        "height_cm": 180
    }
}

---

## ğŸ“¤ Output

Two measurement sets:

- **mesh_measurements** â†’ Raw SMPL-X body measurements  
- **scaled_measurements** â†’ Height-scaled measurements  
- All measurements are **rounded to 2 decimal places**  

---

# ğŸ³ Docker Usage

## Before Build ##

Download SMPLX Models

Run ./download_smplx.sh inside SMPL-Anthropometry

## 1ï¸âƒ£ Build the Image

docker build -t smplx-extraction .

## 2ï¸âƒ£ Run the Container Locally

docker run --rm -it
-v $(pwd)/param.pkl:/workspace/param.pkl
smplx-extraction

(Or adjust to how your handler script is set up.)

# ğŸ“¦ AWS ECR Deployment

ECR Registry: 442042529739.dkr.ecr.ap-south-1.amazonaws.com

Repository for this project:  442042529739.dkr.ecr.ap-south-1.amazonaws.com/smplx-extraction

## 1ï¸âƒ£ Login to ECR

aws ecr get-login-password --region ap-south-1 \
| docker login --username AWS --password-stdin 442042529739.dkr.ecr.ap-south-1.amazonaws.com

## 2ï¸âƒ£ Tag the Docker Image

docker tag smplx-extraction:latest 442042529739.dkr.ecr.ap-south-1.amazonaws.com/smplx-extraction:latest

---

## 3ï¸âƒ£ Push the Image to ECR

docker push 442042529739.dkr.ecr.ap-south-1.amazonaws.com/smplx-extraction:latest

---

# â–¶ï¸ Running the Image From ECR

docker run --rm -it 442042529739.dkr.ecr.ap-south-1.amazonaws.com/smplx-extraction:latest

---

# ğŸ” ECR Credentials to use in Runpod

| Field        | Value |
|--------------|-------|
| **Username** | `AWS` |
| **Password** | Run: `aws ecr get-login-password --region ap-south-1` |

---

# ğŸ“ Notes

- The Dockerfile bundles **all SMPL-X model files** and measurement scripts.
- The handler script (`runpod_handler.py`) is suitable for RunPod serverless GPU/CPU workers.
- Python version is **3.7** to ensure SMPL-X compatibility.
- No GPU required â€” CPU PyTorch version is installed.

---